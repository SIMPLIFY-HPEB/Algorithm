
<!-- saved from url=(0030)http://poj.org/problem?id=3009 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Content-Language" content="en-US"><title>3009 -- Curling 2.0</title><link rel="stylesheet" href="./3009 -- Curling 2.0_files/poj.css" type="text/css"><link rel="shortcut icon" href="http://poj.org/poj.ico"><link rel="icon" href="http://poj.org/poj.gif" type="image/gif"><script src="./3009 -- Curling 2.0_files/poj.js.下载" language="javascript"></script></head><body lang="en-US" leftmargin="5" link="blue" alink="blue" vlink="blue" onkeydown="KeyDown(event)"><a name="top"></a><table style="BORDER-COLLAPSE: collapse" bordercolor="#ffffff" width="100%" border="1"><tbody><tr><td align="CENTER" colspan="5"><table class="h1" cellpadding="0"><tbody><tr><td width="25%" align="left"><img src="./3009 -- Curling 2.0_files/logo1.jpg" height="100" border="0"></td><td colspan="3" bgcolor="#EAEFFD"><table class="h2"><tbody><tr><td><img border="0" src="./3009 -- Curling 2.0_files/logo0.gif" width="450" height="90"></td><td width="95"><img border="0" src="./3009 -- Curling 2.0_files/logo3.gif" width="95" height="95"></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr valign="top" align="CENTER" bgcolor="#6589d1"><th class="h">Online Judge</th><th class="h">Problem Set</th><th class="h">Authors</th><th class="h">Online Contests</th><th class="h">User</th></tr><tr valign="top" align="CENTER" bgcolor="#f1f1fd"><td class="h" onmouseover="scbg(this, 1)" onmouseout="scbg(this, 0)"><a href="http://poj.org/bbs">Web Board</a><br><a href="http://poj.org/">Home Page</a><br><a href="http://poj.org/page?id=1000" target="_blank">F.A.Qs</a><br><a href="http://poj.org/chart">Statistical Charts</a></td><td class="h" onmouseover="scbg(this, 1)" onmouseout="scbg(this, 0)"><form action="http://poj.org/gotoproblem" method="get"><a href="http://poj.org/problemlist">Problems</a><br><a href="http://poj.org/submit">Submit Problem</a><br><a href="http://poj.org/status">Online Status</a><br><font color="blue">Prob.ID:</font><input type="text" name="pid" size="6"><input type="Submit" value="Go" name="pb1"></form></td><td class="h" onmouseover="scbg(this,1)" onmouseout="scbg(this,0)" style="background-color: rgb(241, 241, 253);"><form method="GET" action="http://poj.org/searchuser"><a href="http://poj.org/register">Register</a><br><a href="http://poj.org/modifyuser">Update your info</a><br><a href="http://poj.org/userlist">Authors ranklist</a><br><input type="text" name="key" size="10"><input type="Submit" value="Search" name="B1"></form></td>
<td class="h" onmouseover="scbg(this,1)" onmouseout="scbg(this,0)"><font color="#1a5cc8">Current Contest</font><br><a href="http://poj.org/pastcontests">Past Contests</a><br><a href="http://poj.org/contests">Scheduled Contests</a><br><a href="http://poj.org/challenge.html" target="_blank"><font color="red">Award Contest</font></a></td><td align="left" class="h" onmouseover="scbg(this,1)" onmouseout="scbg(this,0)"><form method="POST" action="http://poj.org/login"><table><tbody><tr><td>User ID:</td><td><input type="text" name="user_id1" size="10" style="font-family:monospace"></td></tr><tr><td>Password:</td><td><input type="password" name="password1" size="10" style="font-family:monospace"></td></tr></tbody></table><input type="Submit" value="login" name="B1">&nbsp;&nbsp;<a href="http://poj.org/register" target="_parent">Register</a><input type="hidden" name="url" value="%2Fproblem%3Fid%3D3009"></form></td></tr></tbody></table><table border="0" width="100%" background="./3009 -- Curling 2.0_files/table_back.jpg"><tbody><tr><td>
<div style="position: absolute; right: 10px;">Language:<select size="1" onchange="window.location.href=&#39;problem?id=3009&amp;lang=&#39;+this.value+&#39;&amp;change=true&#39;"><option value="default" selected="">Default</option></select></div><div class="ptt" lang="en-US">Curling 2.0</div>
<div class="plm"><table align="center"><tbody><tr><td><b>Time Limit:</b> 1000MS</td><td width="10px"></td><td><b>Memory Limit:</b> 65536K</td></tr><tr><td><b>Total Submissions:</b> 34187</td><td width="10px"></td><td><b>Accepted:</b> 13629</td></tr></tbody></table></div><p class="pst">Description</p><div class="ptx" lang="en-US"><p>On Planet MM-21, after their Olympic games this year, curling is getting popular. But the rules are somewhat different from ours. The game is played on an ice game board on which a square mesh is marked. They use only a single stone. The purpose of the game is to lead the stone from the start to the goal with the minimum number of moves.</p><p>Fig. 1 shows an example of a game board. Some squares may be occupied with blocks. There are two special squares namely the start and the goal, which are not occupied with blocks. (These two squares are distinct.) Once the stone begins to move, it will proceed until it hits a block. In order to bring the stone to the goal, you may have to stop the stone by hitting it against a block, and throw again.</p><p align="center"><img src="./3009 -- Curling 2.0_files/3009_1.gif"><br>Fig. 1: Example of board (S: start, G: goal)</p><p>The movement of the stone obeys the following rules:</p><ul><li>At the beginning, the stone stands still at the start square. </li><li>The movements of the stone are restricted to x and y directions. Diagonal moves are prohibited. </li><li>When the stone stands still, you can make it moving by throwing it. You may throw it to any direction unless it is blocked immediately(Fig. 2(a)). </li><li>Once thrown, the stone keeps moving to the same direction until one of the following occurs: <ul><li>The stone hits a block (Fig. 2(b), (c)). <ul><li>The stone stops at the square next to the block it hit. </li><li>The block disappears. </li></ul></li><li>The stone gets out of the board. <ul><li>The game ends in failure. </li></ul></li><li>The stone reaches the goal square. <ul><li>The stone stops there and the game ends in success. </li></ul></li></ul></li><li>You cannot throw the stone more than 10 times in a game. If the stone does not reach the goal in 10 moves, the game ends in failure.</li></ul><p align="center"><img src="./3009 -- Curling 2.0_files/3009_2.gif"><br>Fig. 2: Stone movements</p><p>Under the rules, we would like to know whether the stone at the start can reach the goal and, if yes, the minimum number of moves required.</p><p>With the initial configuration shown in Fig. 1, 4 moves are required to bring the stone from the start to the goal. The route is shown in Fig. 3(a). Notice when the stone reaches the goal, the board configuration has changed as in Fig. 3(b).</p><p align="center"><img src="./3009 -- Curling 2.0_files/3009_3.gif"><br>Fig. 3: The solution for Fig. D-1 and the final board configuration</p></div><p class="pst">Input</p><div class="ptx" lang="en-US"><p>The input is a sequence of datasets. The end of the input is indicated by a line containing two zeros separated by a space. The number of datasets never exceeds 100.</p><p>Each dataset is formatted as follows.</p><blockquote><p><i>the width(=w) and the height(=h) of the board</i> <br><i>First row of the board</i> <br>... <br><i>h-th row of the board</i></p></blockquote><p>The width and the height of the board satisfy: 2 &lt;= <i>w</i> &lt;= 20, 1 &lt;= <i>h</i> &lt;= 20.</p><p>Each line consists of <i>w</i> decimal numbers delimited by a space. The number describes the status of the corresponding square.</p><blockquote><table id="table1"><tbody><tr><td>0 </td><td>vacant square</td></tr><tr><td>1 </td><td>block</td></tr><tr><td>2 </td><td>start position</td></tr><tr><td>3 </td><td>goal position</td></tr></tbody></table></blockquote><p>The dataset for Fig. D-1 is as follows:</p><blockquote><p>6 6 <br>1 0 0 2 1 0 <br>1 1 0 0 0 0 <br>0 0 0 0 0 3 <br>0 0 0 0 0 0 <br>1 0 0 0 0 1 <br>0 1 1 1 1 1</p></blockquote></div><p class="pst">Output</p><div class="ptx" lang="en-US"><p>For each dataset, print a line having a decimal integer indicating the minimum number of moves along a route from the start to the goal. If there are no such routes, print -1 instead. Each line should not have any character other than this number.</p></div><p class="pst">Sample Input</p><pre class="sio">2 1
3 2
6 6
1 0 0 2 1 0
1 1 0 0 0 0
0 0 0 0 0 3
0 0 0 0 0 0
1 0 0 0 0 1
0 1 1 1 1 1
6 1
1 1 2 1 1 3
6 1
1 0 2 1 1 3
12 1
2 0 1 1 1 1 1 1 1 1 1 3
13 1
2 0 1 1 1 1 1 1 1 1 1 1 3
0 0</pre><p class="pst">Sample Output</p><pre class="sio">1
4
-1
4
10
-1</pre><p class="pst">Source</p><div class="ptx" lang="en-US"><a href="http://poj.org/searchproblem?field=source&amp;key=Japan+2006+Domestic">Japan 2006 Domestic</a></div></td></tr></tbody></table>
<font color="#333399" size="3"></font><p align="center"><font color="#333399" size="3">
[<a href="http://poj.org/submit?problem_id=3009">Submit</a>]&nbsp;&nbsp;
 [<a href="javascript:history.go(-1)">Go Back</a>]&nbsp;&nbsp; [<a href="http://poj.org/problemstatus?problem_id=3009">Status</a>]&nbsp;&nbsp; 
[<a href="http://poj.org/bbs?problem_id=3009">Discuss</a>]
</font></p>
<p><img height="30" src="./3009 -- Curling 2.0_files/home.gif" width="40" border="0"><font size="3"><a href="http://poj.org/">Home Page</a> </font>&nbsp;&nbsp;<img height="30" src="./3009 -- Curling 2.0_files/goback.gif" width="40" border="0"><font size="3"><a href="javascript:history.go(-1)">Go Back</a>&nbsp;&nbsp;<img height="30" width="40" border="0" src="./3009 -- Curling 2.0_files/top.gif"><a href="http://poj.org/problem?id=3009#top">To top</a></font><br></p><hr><p align="center" style="font-family:Arial, Helvetica, sans-serif">All Rights Reserved 2003-2013 Ying Fuchen,Xu Pengcheng,Xie Di<br>Any problem, Please <a href="mailto:webmaster@poj.org">Contact Administrator</a></p><script type="text/javascript" src="./3009 -- Curling 2.0_files/stats" charset="UTF-8"></script>
</body></html>